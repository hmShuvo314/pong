const w=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function i(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=i(o);fetch(o.href,s)}};w();const x=.04,P=3e-6;class L{constructor(e){this.element=e,this.reset()}get x(){return parseFloat(getComputedStyle(this.element).getPropertyValue("--x"))}set x(e){this.element.style.setProperty("--x",e)}get y(){return parseFloat(getComputedStyle(this.element).getPropertyValue("--y"))}set y(e){this.element.style.setProperty("--y",e)}rect(){return this.element.getBoundingClientRect()}reset(){for(this.x=50,this.y=50,this.direction={x:0};Math.abs(this.direction.x)<=.3||Math.abs(this.direction.x)>=.8;){const e=S(0,2*Math.PI);this.direction={x:Math.cos(e),y:Math.sin(e)}}this.velocity=x}update(e,i){this.x+=this.direction.x*this.velocity*e,this.y+=this.direction.y*this.velocity*e,this.velocity+=P*e;const r=this.rect();(r.right>=window.innerWidth||r.left<=0)&&(this.direction.x*=-1),i.some(o=>v(o,r))&&(this.direction.y*=-1)}}const S=(t,e)=>Math.random()*(e-t)+t,v=(t,e)=>t.top<=e.bottom&&t.bottom>=e.top&&t.left<e.right&&t.right>e.left,C=.02;class u{constructor(e){this.element=e,this.reset()}get position(){return parseFloat(getComputedStyle(this.element).getPropertyValue("--position"))}set position(e){this.element.style.setProperty("--position",e)}rect(){return this.element.getBoundingClientRect()}reset(){this.position=50}update(e,i){this.position+=C*e*(i-this.position)}}const q=document.querySelector("#ball"),b=document.querySelector("#player-paddle"),I=document.querySelector("#computer-paddle"),a=document.querySelector(".score-wrapper"),c=document.querySelector(".start-modal"),h=c.querySelector("button"),M=document.querySelector("#player-score"),A=document.querySelector("#computer-score"),n=new L(q),p=new u(b),m=new u(I);let y=0,E=0,d;const f=t=>{if(y>=5){O();return}if(d){const e=t-d;n.update(e,[p.rect(),m.rect()]),m.update(e,n.x),F()&&N()}d=t,window.requestAnimationFrame(f)},O=()=>{c.querySelector("h1").textContent="Oops! You lost :(",h.textContent="Replay",c.classList.remove("close")},F=()=>n.rect().bottom>=window.innerHeight||n.rect().top<=0,N=()=>{n.rect().top<=0?(a.classList.add("won"),g("won"),M.textContent=++E):(a.classList.add("lost"),g("lost"),A.textContent=++y),n.reset()},g=t=>{setTimeout(()=>{a.classList.remove(t)},400)};h.addEventListener("click",()=>{c.classList.add("close"),window.requestAnimationFrame(f),document.body.style.setProperty("cursor","none")});window.addEventListener("mousemove",t=>{p.position=t.x/window.innerWidth*100});
